<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>content.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/EEXCESS.model.common.html">EEXCESS.model.common</a></li>
                                <li><a href="../classes/EEXCESS.model.constants.html">EEXCESS.model.constants</a></li>
                                <li><a href="../classes/EEXCESS.model.interests.html">EEXCESS.model.interests</a></li>
                                <li><a href="../classes/EEXCESS.model.languages.html">EEXCESS.model.languages</a></li>
                                <li><a href="../classes/EEXCESS.model.obfuscation.html">EEXCESS.model.obfuscation</a></li>
                                <li><a href="../classes/EEXCESS.model.policy.html">EEXCESS.model.policy</a></li>
                                <li><a href="../classes/EEXCESS.model.profile.html">EEXCESS.model.profile</a></li>
                                <li><a href="../classes/EEXCESS.model.storage.html">EEXCESS.model.storage</a></li>
                                <li><a href="../classes/EEXCESS.model.util-html.html">EEXCESS.model.util-html</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: content.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var EEXCESS = EEXCESS || {};
/**
 * Flag for indicating the widget&#x27;s current visibility state
 * @memberOf EEXCESS
 * @type Boolean
 */
EEXCESS.widgetVisible = false;

/**
 * Changes the widget&#x27;s visibility to the provided value.
 * When the widget is to be shown, the width of the current page is reduced
 * by the widget&#x27;s width and the widget is displayed at the right border.
 * Upon hiding the widget, the size limits for the current page are reset.
 * @memberOf EEXCESS
 * @param {Boolean} visible
 */
EEXCESS.handleWidgetVisibility = function(visible) {
    if (EEXCESS.widgetVisible !== visible) {
        if (visible) { // show widget
            var width = $(window).width() - 333;
            $(&#x27;#eexcess_sidebar&#x27;).show();
            $(&#x27;html&#x27;).css(&#x27;overflow&#x27;, &#x27;auto&#x27;).css(&#x27;position&#x27;, &#x27;absolute&#x27;).css(&#x27;height&#x27;, &#x27;100%&#x27;).css(&#x27;width&#x27;, width + &#x27;px&#x27;);
            $(&#x27;body&#x27;).css(&#x27;overflow-x&#x27;, &#x27;auto&#x27;).css(&#x27;position&#x27;, &#x27;relative&#x27;).css(&#x27;overflow-y&#x27;, &#x27;scroll&#x27;).css(&#x27;height&#x27;, &#x27;100%&#x27;);
        } else { // hide widget
            $(&#x27;#eexcess_sidebar&#x27;).hide();
            $(&#x27;html&#x27;).css(&#x27;overflow&#x27;, &#x27;&#x27;).css(&#x27;position&#x27;, &#x27;&#x27;).css(&#x27;height&#x27;, &#x27;&#x27;).css(&#x27;width&#x27;, &#x27;&#x27;);
            $(&#x27;body&#x27;).css(&#x27;overflow-x&#x27;, &#x27;&#x27;).css(&#x27;position&#x27;, &#x27;&#x27;).css(&#x27;overflow-y&#x27;, &#x27;&#x27;).css(&#x27;height&#x27;, &#x27;&#x27;);
        }
        EEXCESS.widgetVisible = visible;
    }
};

/*
 * Adds the eexcess widget as an iframe, calls the background script with 
 * visibility handler as callback, to determine the current state of 
 * visibility in the background&#x27;s model.
 */

$(&#x27;&lt;iframe id=&quot;eexcess_sidebar&quot; src=&quot;chrome-extension://&#x27; + EEXCESS.utils.extID + &#x27;/widget/widget.html&quot;&gt;&lt;/iframe&gt;&#x27;).appendTo(&#x27;body&#x27;);
EEXCESS.messaging.callBG({method: {parent: &#x27;model&#x27;, func: &#x27;visibility&#x27;}}, EEXCESS.handleWidgetVisibility);

// Listen to messages from the background script
EEXCESS.messaging.listener(
        function(request, sender, sendResponse) {
            switch (request.method) {
                case &#x27;visibility&#x27;:
                    // change widget&#x27;s visibility
                    EEXCESS.handleWidgetVisibility(request.data);
                    break;
                case &#x27;privacySandbox&#x27;:
                    // change widget&#x27;s visibility
                    EEXCESS.handlePrivacyBoxVisibility(request.data);
                    break;
                case &#x27;fancybox&#x27;:
                    // open fancybox preview of the url provided in request.data
                    $(&#x27;&lt;a href=&quot;&#x27; + request.data + &#x27;&quot;&gt;&lt;/a&gt;&#x27;).fancybox({
                        &#x27;autoSize&#x27;: false,
                        &#x27;type&#x27;: &#x27;iframe&#x27;,
                        &#x27;width&#x27;: &#x27;90%&#x27;,
                        &#x27;height&#x27;: &#x27;90%&#x27;
                    }).trigger(&#x27;click&#x27;);
                    break;
                case &#x27;getTextualContext&#x27;:
                    sendResponse({selectedText: document.getSelection().toString(), url: document.URL});
                    break;
            }
        }
);

/*
 * privacy initialization stuff
 */
EEXCESS.handlePrivacyBoxVisibility = function() {
    var visible = !$(&#x27;#eexcess_privacy&#x27;).is(&#x27;:visible&#x27;);
    if (EEXCESS.privacyVisible !== visible) {
        if (visible) {
            $(&#x27;#eexcess_privacy&#x27;).show();
        } else {
            $(&#x27;#eexcess_privacy&#x27;).hide();
        }
        EEXCESS.privacyVisible = visible;
    }
};
$(&#x27;&lt;div style=&quot;border: 0; margin:0; padding: 0; display:none; position:fixed; bottom: 100px; right: 349px; width: 40%; height: 60%;&quot; id=&quot;eexcess_privacy&quot;&gt;&lt;iframe style=&quot;border: 0; width:100%; height: 100%&quot; id=&quot;eexcess_privacy_frame&quot; src=&quot;chrome-extension://&#x27; + EEXCESS.utils.extID + &#x27;/privacy/policy.html&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&#x27;).appendTo(&#x27;body&#x27;);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
