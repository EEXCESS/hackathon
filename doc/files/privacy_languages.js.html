<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>privacy/languages.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/EEXCESS.model.common.html">EEXCESS.model.common</a></li>
                                <li><a href="../classes/EEXCESS.model.constants.html">EEXCESS.model.constants</a></li>
                                <li><a href="../classes/EEXCESS.model.interests.html">EEXCESS.model.interests</a></li>
                                <li><a href="../classes/EEXCESS.model.languages.html">EEXCESS.model.languages</a></li>
                                <li><a href="../classes/EEXCESS.model.obfuscation.html">EEXCESS.model.obfuscation</a></li>
                                <li><a href="../classes/EEXCESS.model.policy.html">EEXCESS.model.policy</a></li>
                                <li><a href="../classes/EEXCESS.model.profile.html">EEXCESS.model.profile</a></li>
                                <li><a href="../classes/EEXCESS.model.storage.html">EEXCESS.model.storage</a></li>
                                <li><a href="../classes/EEXCESS.model.util-html.html">EEXCESS.model.util-html</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: privacy/languages.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Provides methods to manage the languages. 
 * @class languages
 */

/**
 * TODO
 * @returns
 * @method getLanguageSelects
 */
function getLanguageSelects(){
	return document.getElementsByClassName(CLASS_LANGUAGE);
}

/**
 * TODO
 * @method initLanguages
 */
function initLanguages(){
	var languages = getStoredJson(LANGUAGES);
	var languagesElement = document.getElementById(LANGUAGES);
	for (var i = 0 ; i &lt; languages.length ; i++){
		var language = languages[i];
		var label = language.languageLabel;
		var skill = language.languageSkill;
		var code = generateCodeLanguage(i, label, skill);
		languagesElement.innerHTML = languagesElement.innerHTML + code;
	}
}

/**
 * TODO
 * @method addNewLanguage
 */
function addNewLanguage(){
	var languagesElement = document.getElementById(LANGUAGES);
	var nbLanguages = languagesElement.children.length;
	var code = generateCodeLanguage(nbLanguages, null, null);
	languagesElement.innerHTML = languagesElement.innerHTML + code;
	// Initialize the buttons
	var policyElement = document.getElementById(LANGUAGE_POLICY + nbLanguages);
	initButtonGroup(policyElement);
	// Save all the languages
	saveLanguages();
	// Add listeners
	updateLanguageListeners();
}

/**
 * TODO
 * @method updateLanguageListeners
 */
function updateLanguageListeners(){
	var languageElements = document.getElementById(LANGUAGES).children;
	var nbLanguages = languageElements.length;
	for (var i = 0 ; i &lt; nbLanguages ; i++){
		var languageElement = languageElements[i];
		var languageId = languageElement.getAttribute(&quot;id&quot;);
		var languageIdNum = extractEndingNumber(languageId); 
		var selectLabelElement = document.getElementById(LANGUAGE_LABEL_INPUT + languageIdNum);
		selectLabelElement.addEventListener(&quot;change&quot;, function(){ elementListener(this, CLASS_LANGUAGE); }); 
		var selectSkillElement = document.getElementById(LANGUAGE_SKILL_INPUT + languageIdNum);
		selectSkillElement.addEventListener(&quot;change&quot;, function(){ elementListener(this, CLASS_LANGUAGE); }); 
		var removeLanguageElement = document.getElementById(REMOVE_LANGUAGE + languageIdNum);
		removeLanguageElement.addEventListener(&quot;click&quot;, function(){ removeLanguageListener(this); }); 
		var policyLanguageElement = document.getElementById(LANGUAGE_POLICY + languageIdNum);
		for (var j = 0 ; j &lt; policyLanguageElement.children.length ; j++){
			var button = policyLanguageElement.children[j];
			button.addEventListener(&quot;click&quot;, function(){ policyButtonListener(this); });
		}
	}
}

/**
 * TODO
 * @param index
 * @param label
 * @param skill
 * @returns {String}
 * @method generateCodeLanguage
 */
function generateCodeLanguage(index, label, skill){
	var code = 	&#x27;&lt;div id=&quot;&#x27; + LANGUAGE + index + &#x27;&quot; class=&quot;row&quot;&gt;\n&#x27;;
	code += 	&#x27;	&lt;div class=&quot;panel-body&quot;&gt;\n&#x27;;
	code += 	&#x27;		&lt;div class=&quot;col-md-6&quot;&gt;\n&#x27;;
	code += 	&#x27;			&lt;div class=&quot;row&quot;&gt;\n&#x27;;
	code += 	&#x27;				&lt;div class=&quot;col-md-1&quot;&gt;\n&#x27;;
	code += 	&#x27;					&lt;div class=&quot;panel-body&quot;&gt;\n&#x27;;
	code += 	&#x27;						&lt;a id=&quot;&#x27; + REMOVE_LANGUAGE + index +&#x27;&quot; class=&quot;&#x27; + REMOVE_LANGUAGE + &#x27;&quot; style=&quot;color: red;&quot; href=&quot;#x&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-remove&quot;&gt;&lt;/span&gt;&lt;/a&gt;\n&#x27;;
	code += 	&#x27;					&lt;/div&gt;\n&#x27;;
	code += 	&#x27;				&lt;/div&gt;\n&#x27;;
	code += 	&#x27;				&lt;div class=&quot;col-md-11 row&quot;&gt;\n&#x27;;
	code += 	&#x27;					&lt;div class=&quot;col-md-6&quot;&gt;\n&#x27;;
	code += 	&#x27;						&lt;div class=&quot;input-group&quot;&gt;\n&#x27;;
	code += 	&#x27;							&lt;span class=&quot;input-group-addon&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-stats&quot;&gt;&lt;/span&gt;&lt;/span&gt;\n&#x27;;
	code += 	&#x27;							&lt;select id=&quot;&#x27; + LANGUAGE_LABEL_INPUT + index + &#x27;&quot; class=&quot;form-control &#x27; + CLASS_LANGUAGE + &#x27;&quot;&gt;\n&#x27;;
	for (var i = 0 ; i &lt; TAB_LANGUAGE_LABELS.length ; i++){
		var currentLabel = TAB_LANGUAGE_LABELS[i];
		var selected = &quot;&quot;;
		var cond1 = (label != null) &amp;&amp; (currentLabel == label);
		var cond2 = (label == null) &amp;&amp; (i == DEFAULT_LANGUAGE_LABEL_INDEX);
		if (cond1 || cond2){
			selected = &quot; selected=\&quot;selected\&quot;&quot;;
		} 
		code += &#x27;								&lt;option value=&quot;&#x27; + currentLabel + &#x27;&quot;&#x27; + selected + &#x27;&gt;&#x27; + currentLabel + &#x27;&lt;/option&gt;\n&#x27;;
	}	
	code += 	&#x27;							&lt;/select&gt;\n&#x27;;
	code += 	&#x27;						&lt;/div&gt;\n&#x27;;
	code += 	&#x27;					&lt;/div&gt;\n&#x27;;
	code += 	&#x27;					&lt;div class=&quot;col-md-6&quot;&gt; \n&#x27;;
	code += 	&#x27;						&lt;div class=&quot;input-group&quot;&gt;\n&#x27;;
	code += 	&#x27;							&lt;span class=&quot;input-group-addon&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-stats&quot;&gt;&lt;/span&gt;&lt;/span&gt;\n&#x27;;
	code += 	&#x27;							&lt;select id=&quot;&#x27; + LANGUAGE_SKILL_INPUT + index + &#x27;&quot; class=&quot;form-control &#x27; + CLASS_LANGUAGE + &#x27;&quot;&gt;\n&#x27;;
	for (var i = 0 ; i &lt; TAB_LANGUAGE_SKILLS.length ; i++){
		var currentSkill = TAB_LANGUAGE_SKILLS[i];
		var selected = &quot;&quot;; 
		var cond1 = (skill != null) &amp;&amp; (currentSkill == skill);
		var cond2 = (skill == null) &amp;&amp; (i == DEFAULT_LANGUAGE_SKILL_INDEX);
		if (cond1 || cond2){
			selected = &quot; selected=\&quot;selected\&quot;&quot;;
		}
		code += &#x27;								&lt;option value=&quot;&#x27; + currentSkill + &#x27;&quot;&#x27; + selected + &#x27;&gt;&#x27; + currentSkill + &#x27;&lt;/option&gt;\n&#x27;;
	}
	code +=			&#x27;						&lt;/select&gt;\n&#x27;;
	code += 	&#x27;						&lt;/div&gt;\n&#x27;;
	code += 	&#x27;					&lt;/div&gt;\n&#x27;;
	code += 	&#x27;				&lt;/div&gt;\n&#x27;;
	code += 	&#x27;			&lt;/div&gt;\n&#x27;;
	code += 	&#x27;		&lt;/div&gt;\n&#x27;;
	code += 	&#x27;		&lt;div id=&quot;&#x27; + LANGUAGE_POLICY + index + &#x27;&quot; class=&quot;btn-group col-md-2&quot; role=&quot;group&quot;&gt;\n&#x27;;
	code += 	&#x27;			&lt;button type=&quot;button&quot; class=&quot;btn &#x27; + BUTTON_STYLE_GREY + &#x27; &#x27; + CLASS_BUTTON + &#x27;&quot; &#x27; + PARENT_ID + &#x27;=&quot;&#x27; + LANGUAGE_POLICY + index + &#x27;&quot;&gt;Hidden&lt;/button&gt;\n&#x27;;
	code += 	&#x27;			&lt;button type=&quot;button&quot; class=&quot;btn &#x27; + BUTTON_STYLE_GREY + &#x27; &#x27; + CLASS_BUTTON + &#x27;&quot; &#x27; + PARENT_ID + &#x27;=&quot;&#x27; + LANGUAGE_POLICY + index + &#x27;&quot;&gt;Disclosed&lt;/button&gt;\n&#x27;;
	code += 	&#x27;		&lt;/div&gt;\n&#x27;;
	code += 	&#x27;		&lt;div class=&quot;col-md-4&quot;&gt;Value shared with the system: \n&#x27;;
	code += 	&#x27;			&lt;span id=&quot;&#x27; + LANGUAGE_LABEL_DISPLAY + index + &#x27;&quot;&gt;&lt;/span&gt;\n&#x27;;
	code += 	&#x27;			&lt;span id=&quot;&#x27; + LANGUAGE_SKILL_DISPLAY + index + &#x27;&quot;&gt;&lt;/span&gt;\n&#x27;;
	code += 	&#x27;		&lt;/div&gt;\n&#x27;;
	code += 	&#x27;	&lt;/div&gt;\n&#x27;;
	code += 	&#x27;&lt;/div&gt;\n&#x27;;
	return code;
}

/**
 * TODO
 * @method saveLanguages
 */
function saveLanguages(){
	var languagesElement = document.getElementById(LANGUAGES);
	var languageElements = languagesElement.children;
	var languages = [];
	for (var i = 0 ; i &lt; languageElements.length ; i++){
		var language = new Object();
		var languageElement = languageElements[i];
		var languageId = languageElement.getAttribute(&quot;id&quot;);
		var num = extractEndingNumber(languageId); 
		
		var languageLabel = document.getElementById(LANGUAGE_LABEL_INPUT + num);
		var label = languageLabel.options[languageLabel.selectedIndex].value;
		language[LANGUAGE_LABEL] = label;
		
		var languageSkill = document.getElementById(LANGUAGE_SKILL_INPUT + num);
		var skill = languageSkill.options[languageSkill.selectedIndex].value;
		language[LANGUAGE_SKILL] = skill;
		
		languages.push(language);
	}
	storeValue(LANGUAGES, JSON.stringify(languages));
}

/**
 * TODO
 * @param link
 * @method removeLanguageListener
 */
function removeLanguageListener(link){
	resetElementPolicy(link, LANGUAGE_POLICY, DEFAULT_POLICY_LEVEL);
	removeElement(link, LANGUAGE);
	saveLanguages();
}

/**
 * TODO
 * @method addLanguageListener
 */
function addLanguageListener(){ 
	addNewLanguage(); 
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
